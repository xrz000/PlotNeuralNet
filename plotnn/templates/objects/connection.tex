{% if path|length > 2 %}
\path ({{ origin }}-anchor) -- ({{ origin }}-{{ origin_loc }}) coordinate[pos={{ origin_pos }}] ({{ origin }}-out);
\path ({{ target }}-anchor) -- ({{ target }}-{{ target_loc }}) coordinate[pos={{ target_pos }}] ({{ target }}-in);
\draw [connection, {{ style }}] ({{ origin }}-{{ origin_loc }})
-- ({{ origin }}-out)
-- ({{ origin }}-out) {{ path[:2] }} ({{ target }}-in)
{{ path[1:3] }} ({{ target }}-in)
-- ({{ target }}-{{ target_loc }});
{% else %}
\draw [connection, {{ style }}] {{ origin }} {{ path }} {{ target }};
{% endif %}
