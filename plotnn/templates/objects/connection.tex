{% if path|length > 2 %}
\path ({{ origin }}-anchor) -- ({{ origin }}-{{ origin_loc }}) coordinate[pos={{ origin_pos }}] ({{ origin }}-out);
\path ({{ target }}-anchor) -- ({{ target }}-{{ target_loc }}) coordinate[pos={{ target_pos }}] ({{ target }}-in);
\draw [{{ style }}] ({{ origin }}-{{ origin_loc }})
-- ({{ origin }}-out)
-- ({{ origin }}-out) {{ path[:2] }} ({{ target }}-in)
 node[pos=0.25, auto] { {{ caption }}}
{{ path[1:3] }} ({{ target }}-in)
-- ({{ target }}-{{ target_loc }});
{% else %}
\draw [{{ style }}] {{ origin }} {{ path }} {{ target }}
 node[{{ caption_loc }}, auto] { {{ caption }}};
{% endif %}
